@if (authService.user()) {
	<button [matButton]="isPeopleActive ? 'filled' : ''" routerLink="/people">
		<mat-icon fontIcon="emoji_people" class="shrinkable"></mat-icon>

		<span class="shrinkable-txt">People</span>
	</button>

	<button [matButton]="isFeedActive ? 'filled' : ''" routerLink="/feed">
		<mat-icon fontIcon="home" class="shrinkable"></mat-icon>

		<span class="shrinkable-txt">Home</span>
	</button>

	<button id="person-btn" matButton [matMenuTriggerFor]="menu" style="margin-left: auto">
		<mat-icon fontIcon="person" style="margin: 0;"></mat-icon>
	</button>
} @else {
	<h2 style="margin: 0.2rem 0">Welcome to gbook!</h2>
}

<mat-menu #menu="matMenu" xPosition="before">
	<button id="profile-pic" mat-menu-item [routerLink]="['profile', authService.user()?.id]">
		<img [src]="'/content/avatars/' + (authService.user()?.id || 'no') + '.jpg?v=' + queryParam()" />
		{{ authService.user()?.username || '???' }}
	</button>

	<button mat-menu-item (click)="dialog.open =!dialog.open">
		<mat-icon fontIcon="photo_camera"></mat-icon>
		Avatar
	</button>

	<button mat-menu-item (click)="logout()">
		<mat-icon fontIcon="logout"></mat-icon>
		Logout
	</button>
</mat-menu>

<dialog #dialog style="border-radius: var(--mat-sys-corner-small);border: 1px solid var(--mat-sys-primary);">
	<app-image-upload (end)="dialog.open = false; queryParam.set(queryParam() + 1)"></app-image-upload>
</dialog>